(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{2605:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>P});var s=t(95155),n=t(12115),l=t(88482),r=t(89852),i=t(97168),c=t(95784),d=t(88524),o=t(88145),m=t(36894),u=t(60823),h=t(76981),x=t(5196),b=t(53999);function j(e){let{className:a,...t}=e;return(0,s.jsx)(h.bL,{"data-slot":"checkbox",className:(0,b.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)(h.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(x.A,{className:"size-3.5"})})})}var p=t(33109),g=t(68500),f=t(76356),y=t(91788),v=t(66474),N=t(1482),k=t(54416),w=t(47924),M=t(69074),A=t(21492),C=t(63008),S=t(66972),T=t(2087),D=t(72226);function P(){let[e,a]=(0,n.useState)(D.vd),[t,h]=(0,n.useState)(D.gN),[x,b]=(0,n.useState)(""),[P,L]=(0,n.useState)("all"),[R,U]=(0,n.useState)("all"),[$,E]=(0,n.useState)("all"),[I,G]=(0,n.useState)({}),[O,F]=(0,n.useState)("date"),[K,_]=(0,n.useState)("desc"),[V,B]=(0,n.useState)(1),[J,q]=(0,n.useState)(10),Z=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),H=(e,s)=>{h(t.map(a=>a.id===e.id?e:a)),s&&a(s)},W=(e,s)=>{h(t.filter(a=>a.id!==e)),s&&a(s)},z=e=>{h(t.map(a=>a.id===e?{...a,struck:!a.struck}:a))},X=(0,n.useMemo)(()=>{let e=t.filter(e=>{if(x&&!e.description.toLowerCase().includes(x.toLowerCase())||"all"!==P&&e.accountId!==P||"all"!==R&&e.category!==R||"all"!==$&&e.type!==$)return!1;if(I.from||I.to){let a=new Date(e.date);if(I.from&&a<I.from||I.to&&a>I.to)return!1}return!0});return e.sort((e,a)=>{let t=0;switch(O){case"date":t=new Date(e.date).getTime()-new Date(a.date).getTime();break;case"amount":t=Math.abs(e.amount)-Math.abs(a.amount);break;case"description":t=e.description.localeCompare(a.description)}return"asc"===K?t:-t}),e},[t,x,P,R,$,I,O,K]),Y=(0,n.useMemo)(()=>{let e=(V-1)*J;return X.slice(e,e+J)},[X,V,J]),Q=Math.ceil(X.length/J),ee=e=>{switch(e){case"income":return(0,s.jsx)(p.A,{className:"h-4 w-4 text-secondary"});case"expense":return(0,s.jsx)(g.A,{className:"h-4 w-4 text-destructive"});case"transfer":return(0,s.jsx)(f.A,{className:"h-4 w-4 text-primary"});default:return null}},ea=e=>{switch(e){case"income":return"bg-secondary/10 text-secondary border-secondary/20";case"expense":return"bg-destructive/10 text-destructive border-destructive/20";case"transfer":return"bg-primary/10 text-primary border-primary/20";default:return"bg-muted text-muted-foreground"}},et=[x,"all"!==P?P:null,"all"!==R?R:null,"all"!==$?$:null,I.from||I.to?"dateRange":null].filter(Boolean).length;return(0,s.jsx)("div",{className:"min-h-screen bg-background p-4 md:p-8",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground font-manrope",children:"Riwayat Transaksi"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(u.AM,{children:[(0,s.jsx)(u.Wv,{asChild:!0,children:(0,s.jsxs)(i.$,{className:"neobrutalism-button bg-secondary text-secondary-foreground",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Export",(0,s.jsx)(v.A,{className:"h-4 w-4 ml-2"})]})}),(0,s.jsx)(u.hl,{className:"w-48 p-2",align:"end",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(i.$,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>{let a=new Blob([["Tanggal,Deskripsi,Kategori,Sub Kategori,Akun,Tipe,Jumlah,Struck",...X.map(a=>{let t=e.find(e=>e.id===a.accountId);return[a.date,'"'.concat(a.description,'"'),a.category,a.subcategory||"",(null==t?void 0:t.name)||"",a.type,a.amount,a.struck?"Ya":"Tidak"].join(",")})].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="transaksi_".concat((0,C.GP)(new Date,"yyyy-MM-dd"),".csv"),s.click(),window.URL.revokeObjectURL(t)},children:"Export CSV"}),(0,s.jsx)(i.$,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>{let a=new Blob(['\n      <html>\n        <head>\n          <title>Laporan Transaksi</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n            th { background-color: #f2f2f2; font-weight: bold; }\n            .header { text-align: center; margin-bottom: 20px; }\n            .struck { text-decoration: line-through; opacity: 0.6; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>Laporan Riwayat Transaksi</h1>\n            <p>Periode: '.concat((0,C.GP)(new Date,"dd MMMM yyyy",{locale:S.id}),"</p>\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th>Tanggal</th>\n                <th>Deskripsi</th>\n                <th>Kategori</th>\n                <th>Akun</th>\n                <th>Tipe</th>\n                <th>Jumlah</th>\n                <th>Status</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(X.map(a=>{let t=e.find(e=>e.id===a.accountId);return'\n                  <tr class="'.concat(a.struck?"struck":"",'">\n                    <td>').concat((0,C.GP)(new Date(a.date),"dd/MM/yyyy"),"</td>\n                    <td>").concat(a.description,"</td>\n                    <td>").concat(a.category,"</td>\n                    <td>").concat((null==t?void 0:t.name)||"","</td>\n                    <td>").concat("income"===a.type?"Pemasukan":"expense"===a.type?"Pengeluaran":"Transfer","</td>\n                    <td>").concat(Z(Math.abs(a.amount)),"</td>\n                    <td>").concat(a.struck?"Selesai":"Aktif","</td>\n                  </tr>\n                ")}).join(""),"\n            </tbody>\n          </table>\n        </body>\n      </html>\n    ")],{type:"text/html"}),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="transaksi_".concat((0,C.GP)(new Date,"yyyy-MM-dd"),".pdf"),s.click(),window.URL.revokeObjectURL(t)},children:"Export PDF"}),(0,s.jsx)(i.$,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>{let a=new Blob([[["Tanggal","Deskripsi","Kategori","Sub Kategori","Akun","Tipe","Jumlah","Status"],...X.map(a=>{let t=e.find(e=>e.id===a.accountId);return[(0,C.GP)(new Date(a.date),"dd/MM/yyyy"),a.description,a.category,a.subcategory||"",(null==t?void 0:t.name)||"","income"===a.type?"Pemasukan":"expense"===a.type?"Pengeluaran":"Transfer",Math.abs(a.amount),a.struck?"Selesai":"Aktif"]})].map(e=>e.join(",")).join("\n")],{type:"application/vnd.ms-excel"}),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="transaksi_".concat((0,C.GP)(new Date,"yyyy-MM-dd"),".xlsx"),s.click(),window.URL.revokeObjectURL(t)},children:"Export XLSX"})]})})]})})]}),(0,s.jsxs)(l.Zp,{className:"neobrutalism-card mb-6",children:[(0,s.jsx)(l.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(l.ZB,{className:"text-xl font-bold font-manrope flex items-center gap-2",children:[(0,s.jsx)(N.A,{className:"h-5 w-5"}),"Filter & Pencarian"]}),et>0&&(0,s.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{b(""),L("all"),U("all"),E("all"),G({}),B(1)},className:"neobrutalism-button bg-transparent",children:[(0,s.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Hapus Filter (",et,")"]})]})}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[(0,s.jsxs)("div",{className:"xl:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Cari Transaksi"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(r.p,{placeholder:"Cari deskripsi...",value:x,onChange:e=>b(e.target.value),className:"neobrutalism-input pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Akun"}),(0,s.jsxs)(c.l6,{value:P,onValueChange:L,children:[(0,s.jsx)(c.bq,{className:"neobrutalism-input",children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"Semua Akun"}),e.map(e=>(0,s.jsx)(c.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.color)}),e.name]})},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Kategori"}),(0,s.jsxs)(c.l6,{value:R,onValueChange:U,children:[(0,s.jsx)(c.bq,{className:"neobrutalism-input",children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"Semua Kategori"}),D.TO.map(e=>(0,s.jsx)(c.eb,{value:e.name,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Tipe"}),(0,s.jsxs)(c.l6,{value:$,onValueChange:E,children:[(0,s.jsx)(c.bq,{className:"neobrutalism-input",children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"Semua Tipe"}),(0,s.jsx)(c.eb,{value:"income",children:"Pemasukan"}),(0,s.jsx)(c.eb,{value:"expense",children:"Pengeluaran"}),(0,s.jsx)(c.eb,{value:"transfer",children:"Transfer"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Rentang Tanggal"}),(0,s.jsxs)(u.AM,{children:[(0,s.jsx)(u.Wv,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"outline",className:"neobrutalism-input w-full justify-start text-left font-normal bg-transparent",children:[(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4"}),I.from?I.to?(0,s.jsxs)(s.Fragment,{children:[(0,C.GP)(I.from,"dd MMM",{locale:S.id})," -"," ",(0,C.GP)(I.to,"dd MMM yyyy",{locale:S.id})]}):(0,C.GP)(I.from,"dd MMM yyyy",{locale:S.id}):"Pilih tanggal"]})}),(0,s.jsx)(u.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(m.V,{initialFocus:!0,mode:"range",defaultMonth:I.from,selected:I,onSelect:G,numberOfMonths:2})})]})]})]})})]}),(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Menampilkan ",Y.length," dari ",X.length," transaksi"]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold",children:"Tampilkan:"}),(0,s.jsxs)(c.l6,{value:J.toString(),onValueChange:e=>{q(Number(e)),B(1)},children:[(0,s.jsx)(c.bq,{className:"neobrutalism-input w-20",children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"10",children:"10"}),(0,s.jsx)(c.eb,{value:"25",children:"25"}),(0,s.jsx)(c.eb,{value:"50",children:"50"}),(0,s.jsx)(c.eb,{value:X.length.toString(),children:"Semua"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold",children:"Urutkan:"}),(0,s.jsxs)(c.l6,{value:"".concat(O,"-").concat(K),onValueChange:e=>{let[a,t]=e.split("-");F(a),_(t)},children:[(0,s.jsx)(c.bq,{className:"neobrutalism-input w-48",children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"date-desc",children:"Tanggal (Terbaru)"}),(0,s.jsx)(c.eb,{value:"date-asc",children:"Tanggal (Terlama)"}),(0,s.jsx)(c.eb,{value:"amount-desc",children:"Jumlah (Tertinggi)"}),(0,s.jsx)(c.eb,{value:"amount-asc",children:"Jumlah (Terendah)"}),(0,s.jsx)(c.eb,{value:"description-asc",children:"Deskripsi (A-Z)"}),(0,s.jsx)(c.eb,{value:"description-desc",children:"Deskripsi (Z-A)"})]})]})]})]})]}),(0,s.jsx)(l.Zp,{className:"neobrutalism-card",children:(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{className:"border-b-2 border-black",children:[(0,s.jsx)(d.nd,{className:"font-bold text-foreground",children:(0,s.jsxs)(i.$,{variant:"ghost",onClick:()=>{"date"===O?_("asc"===K?"desc":"asc"):(F("date"),_("desc"))},className:"h-auto p-0 font-bold hover:bg-transparent",children:["Tanggal",(0,s.jsx)(A.A,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground",children:(0,s.jsxs)(i.$,{variant:"ghost",onClick:()=>{"description"===O?_("asc"===K?"desc":"asc"):(F("description"),_("asc"))},className:"h-auto p-0 font-bold hover:bg-transparent",children:["Deskripsi",(0,s.jsx)(A.A,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground",children:"Akun"}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground",children:"Kategori"}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground",children:"Tipe"}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground text-right",children:(0,s.jsxs)(i.$,{variant:"ghost",onClick:()=>{"amount"===O?_("asc"===K?"desc":"asc"):(F("amount"),_("desc"))},className:"h-auto p-0 font-bold hover:bg-transparent",children:["Jumlah",(0,s.jsx)(A.A,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground w-16",children:"Struck"}),(0,s.jsx)(d.nd,{className:"font-bold text-foreground w-20",children:"Aksi"})]})}),(0,s.jsx)(d.BF,{children:0===Y.length?(0,s.jsx)(d.Hj,{children:(0,s.jsx)(d.nA,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"Tidak ada transaksi yang ditemukan"})}):Y.map(a=>{let t=e.find(e=>e.id===a.accountId),n=a.toAccountId?e.find(e=>e.id===a.toAccountId):null;return(0,s.jsxs)(d.Hj,{className:"neobrutalism-table-row border-b border-border transition-all duration-75 ".concat(a.struck?"opacity-60":""),children:[(0,s.jsx)(d.nA,{className:"font-medium",children:(0,C.GP)(new Date(a.date),"dd MMM yyyy",{locale:S.id})}),(0,s.jsx)(d.nA,{children:(0,s.jsxs)("div",{className:a.struck?"line-through":"",children:[(0,s.jsx)("div",{className:"font-medium",children:a.description}),a.subcategory&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:a.subcategory})]})}),(0,s.jsx)(d.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(null==t?void 0:t.color)}),(0,s.jsx)("span",{className:"text-sm",children:null==t?void 0:t.name}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"→"}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(n.color)}),(0,s.jsx)("span",{className:"text-sm",children:n.name})]})]})}),(0,s.jsx)(d.nA,{children:(0,s.jsx)("div",{className:"text-sm",children:a.category})}),(0,s.jsx)(d.nA,{children:(0,s.jsxs)(o.E,{className:"".concat(ea(a.type)," flex items-center gap-1 w-fit"),children:[ee(a.type),"income"===a.type?"Masuk":"expense"===a.type?"Keluar":"Transfer"]})}),(0,s.jsx)(d.nA,{className:"text-right font-semibold ".concat("income"===a.type?"text-secondary":"transfer"===a.type?"text-primary":"text-destructive"," ").concat(a.struck?"line-through":""),children:Z(Math.abs(a.amount))}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(j,{checked:a.struck||!1,onCheckedChange:()=>z(a.id),className:"neobrutalism-input"})}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(T.u,{transaction:a,accounts:e,onUpdate:H,onDelete:W})})]},a.id)})})]})})}),Q>1&&(0,s.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2",children:[(0,s.jsx)(i.$,{variant:"outline",onClick:()=>B(Math.max(1,V-1)),disabled:1===V,className:"neobrutalism-button bg-transparent",children:"Sebelumnya"}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Q)},(e,a)=>{let t;return t=Q<=5?a+1:V<=3?a+1:V>=Q-2?Q-4+a:V-2+a,(0,s.jsx)(i.$,{variant:V===t?"default":"outline",onClick:()=>B(t),className:"neobrutalism-button w-10 h-10 p-0",children:t},t)})}),(0,s.jsx)(i.$,{variant:"outline",onClick:()=>B(Math.min(Q,V+1)),disabled:V===Q,className:"neobrutalism-button bg-transparent",children:"Selanjutnya"})]})]})})}},19275:(e,a,t)=>{Promise.resolve().then(t.bind(t,2605))}},e=>{var a=a=>e(e.s=a);e.O(0,[455,89,34,787,264,817,686,500,683,441,684,358],()=>a(19275)),_N_E=e.O()}]);